# Callback Navigation Map - –ü–æ–ª–Ω—ã–π –ê—É–¥–∏—Ç

## ‚úÖ Callbacks –≤ button_handler (–†–∞–±–æ—Ç–∞—é—Ç)

### –û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- `menu` ‚Üí –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (reset state)
- `stats` ‚Üí –ü—Ä–æ—Ñ–∏–ª—å/—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `help` ‚Üí –ü–æ–º–æ—â—å
- `start_msg` ‚Üí –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ /start
- `ask` ‚Üí –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å

### –§—É–Ω–∫—Ü–∏–∏
- `moon` ‚Üí –õ—É–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å (—Å–µ–≥–æ–¥–Ω—è)
- `moon_*` ‚Üí –õ—É–Ω–∞ –Ω–∞ –ø–µ—Ä–∏–æ–¥ (today/tomorrow)
- `dream_menu` ‚Üí –¢—Ä–∞–∫—Ç–æ–≤–∫–∞ —Å–Ω–∞
- `dream_detailed` ‚Üí –ü–æ–¥—Ä–æ–±–Ω–∞—è —Ç—Ä–∞–∫—Ç–æ–≤–∫–∞
- `ask_details_dream` ‚Üí –£—Ç–æ—á–Ω–∏—Ç—å –¥–µ—Ç–∞–ª–∏ —Å–Ω–∞
- `daily_message` ‚Üí –ü–æ—Å–ª–∞–Ω–∏–µ –¥–Ω—è

### –¢–∞—Ä–æ –∏ —Ä–∞—Å–∫–ª–∞–¥—ã
- `tarot_spread_menu` ‚Üí –ú–µ–Ω—é –¢–∞—Ä–æ
- `tarot_sphere_*` ‚Üí –í—ã–±–æ—Ä —Å—Ñ–µ—Ä—ã (health/career/love/money/purpose)
- `sphere_*` ‚Üí –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä —Å—Ñ–µ—Ä—ã
- `period_recommend_week_*` / `period_recommend_month_*` ‚Üí –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –ø–µ—Ä–∏–æ–¥

### –ì–æ—Ä–æ—Å–∫–æ–ø—ã
- `horo_menu` ‚Üí –ú–µ–Ω—é –≥–æ—Ä–æ—Å–∫–æ–ø–∞
- `period_*` ‚Üí –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ (today/tomorrow/week/month)
- `horo_*` / `sign_*` ‚Üí –í—ã–±–æ—Ä –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞

### –ù—É–º–µ—Ä–æ–ª–æ–≥–∏—è –∏ —Ä–∞—Å—á–µ—Ç—ã
- `numerology_menu` ‚Üí –ú–µ–Ω—é –°—é—Ü–∞–π
- `matrix_menu` ‚Üí –ú–∞—Ç—Ä–∏—Ü–∞ —Å—É–¥—å–±—ã
- `compatibility_menu` ‚Üí –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- `use_saved_natal` / `new_natal` ‚Üí –ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞
- `use_saved_numerology` / `new_numerology` ‚Üí –°—é—Ü–∞–π
- `use_saved_matrix` / `new_matrix` ‚Üí –ú–∞—Ç—Ä–∏—Ü–∞

### –†–µ–π—Ç–∏–Ω–≥ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
- `rate_good` / `rate_bad` ‚Üí –û—Ü–µ–Ω–∫–∞ –æ—Ç–≤–µ—Ç–∞
- `details` ‚Üí –î–µ—Ç–∞–ª–∏ —Ä–∞—Å–∫–ª–∞–¥–∞
- `ask_followup` ‚Üí –£—Ç–æ—á–Ω—è—é—â–∏–π –≤–æ–ø—Ä–æ—Å
- `toggle_daily` ‚Üí –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É

### Premium
- `premium` ‚Üí –ú–µ–Ω—é Premium
- `buy_premium` ‚Üí –ü–æ–∫—É–ø–∫–∞ Premium
- `deepen` ‚Üí –£–≥–ª—É–±–ª–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (premium)

## ‚ùå –ü–†–û–ë–õ–ï–ú–´ –ù–ê–ô–î–ï–ù–´:

### 1. Callback –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ:**
- –ù–µ –Ω–∞–π–¥–µ–Ω–æ –≤ —Ç–µ–∫—É—â–µ–º –∫–æ–¥–µ (–ø—Ä–µ–¥—ã–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è –±—ã–ª–∞ `ask_details`)

### 2. –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

#### –ö–Ω–æ–ø–∫–∞ "–î–µ—Ç–∞–ª–∏" –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å
**–¢–µ–∫—É—â–µ–µ:**
```python
# line 390: –≤ keyboard –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ä–∞–∫—É–ª–∞
[InlineKeyboardButton("üîç –î–µ—Ç–∞–ª–∏ —Ä–∞—Å–∫–ª–∞–¥–∞", callback_data="details")]
```

**–û–±—Ä–∞–±–æ—Ç—á–∏–∫ (line 1042-1060):**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ (–ò-–¶–∑–∏–Ω, –¢–∞—Ä–æ, –ê—Å—Ç—Ä–æ–ª–æ–≥–∏—è)
- –î–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫—É "–£—Ç–æ—á–Ω–∏—Ç—å" ‚Üí `ask_followup`
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!

#### –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ—Ü–µ–Ω–∫–∏
**rate_good:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ popup "–ë–ª–∞–≥–æ–¥–∞—Ä—é"
- –ú–µ–Ω—è–µ—Ç –∫–Ω–æ–ø–∫–∏ –Ω–∞ "–ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å" + "–í –º–µ–Ω—é"
- ‚úÖ –¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

**rate_bad:**
- –ó–∞–º–µ–Ω—è–µ—Ç –≤–µ—Å—å —Ç–µ–∫—Å—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Å–∏—Ö–æ–ª–æ–≥–µ
- ‚ö†Ô∏è –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç —Ç–µ—Ä—è–µ—Ç—Å—è

### 3. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

#### "–ù–∞–∑–∞–¥" –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
```python
# line 688:
[InlineKeyboardButton("üîô –ù–∞–∑–∞–¥", callback_data="start_msg")]
```
- –í–µ–¥–µ—Ç –Ω–∞ /start (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ)
- ‚ùì –õ–æ–≥–∏—á–Ω–æ? –ò–ª–∏ –¥–æ–ª–∂–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –º–µ–Ω—é?

#### –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ "–ù–∞–∑–∞–¥" –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω—É–∂–Ω–æ:
- [ ] –ü–æ—Å–ª–µ –ø–æ–∫–∞–∑–∞ –¥–µ—Ç–∞–ª–µ–π —Ä–∞—Å–∫–ª–∞–¥–∞
- [ ] –ü–æ—Å–ª–µ –ø—Ä–µ–º–∏—É–º-—ç–∫—Ä–∞–Ω–∞
- [ ] –í –ø—Ä–æ—Ü–µ—Å—Å–µ –≤–≤–æ–¥–∞ –¥–∞—Ç

## üîç –¢—Ä–µ–±—É—é—Ç –ü—Ä–æ–≤–µ—Ä–∫–∏:

1. **–í—Å–µ –ª–∏ –º–µ–Ω—é –∏–º–µ—é—Ç "–ù–∞–∑–∞–¥"?**
2. **–í–µ–∑–¥–µ –ª–∏ reset_state –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –º–µ–Ω—é?**
3. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ?**
4. **–ù–µ—Ç –ª–∏ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫?**

## –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å extended_handlers.py –Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ callbacks
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ "–æ—Ç –∏ –¥–æ"
3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
4. –°–æ–∑–¥–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
