
def fix_markdown(text: str) -> str:
    """
    Исправить Markdown разметку для Telegram (Legacy Mode).
    1. Заменяет **bold** на *bold*
    2. Экранирует _ внутри слов (насколько возможно просто)
    """
    if not text:
        return ""
    
    # Заменяем двойные звездочки на одинарные (Telegram legacy markdown использует * для жирного)
    text = text.replace("**", "*")
    
    # С нижним подчеркиванием сложнее. ИИ может использовать _italic_.
    # Но часто ошибки возникают в именах файлов snake_case.
    # Пока оставим _ как есть, надеясь на адекватность ИИ, или заменим на \_ если это критично.
    # В данном случае, основная проблема была в ** и в статичном @oracle_support
    
    return text
